<?xml version='1.0' encoding='UTF-8'?>
<!DOCTYPE WorkflowCase PUBLIC "sailpoint.dtd" "sailpoint.dtd">
<WorkflowCase launcher="spadmin" name="Create Application - 37">
  <Workflow currentStep="41e2740c3f004802bd845cb0258a17a0" explicitTransitions="true" name="Create Application" type="BatchProvisioning">
    <Variable editable="true" input="true" name="App_Name"/>
    <Variable editable="true" input="true" name="App_Entitlement_Values"/>
    <Variable editable="true" initializer="spadmin" input="true" name="App_Implementers"/>
    <Variable editable="true" initializer="spadmin" input="true" name="App_Owners"/>
    <Variable editable="true" input="true" name="App_Requestable_Attrs"/>
    <Variable editable="true" input="true" name="App_Entitlements"/>
    <Variable editable="true" input="true" name="App_Attrs"/>
    <Variable editable="true" input="true" name="App_CorrelatingAttr"/>
    <Variable editable="true" initializer="NA" input="true" name="App_Desc"/>
    <Variable editable="true" initializer="spadmin" input="true" name="App_Owner"/>
    <Variable editable="true" initializer="script:return false;" input="true" name="is_SOM_Connected"/>
    <Variable editable="true" initializer="NA" input="true" name="SOM_Details"/>
    <Variable name="Created_Objects"/>
    <Variable editable="true" initializer="AgCo" input="true" name="App_System"/>
    <Variable editable="true" input="true" name="App_IdentityAttr"/>
    <Variable editable="true" input="true" name="App_Type"/>
    <Variable editable="true" input="true" name="App_Owner_Email"/>
    <Variable editable="true" input="true" name="App_Implementer_Email"/>
    <Variable editable="true" initializer="spadmin" input="true" name="App_Grantors"/>
    <Variable editable="true" input="true" name="App_Grantors_Email"/>
    <Variable editable="true" name="messages"/>
    <Step complete="true" icon="Task" name="Validation" posX="42" posY="16" resultVariable="messages">
      <Arg name="App_Attrs" value="ref:App_Attrs"/>
      <Arg name="App_CorrelatingAttr" value="ref:App_CorrelatingAttr"/>
      <Arg name="App_Entitlements" value="ref:App_Entitlements"/>
      <Arg name="App_Owner_Email" value="ref:App_Owner_Email"/>
      <Arg name="App_Owners" value="ref:App_Owners"/>
      <Arg name="App_Implementer_Email" value="ref:App_Implementer_Email"/>
      <Arg name="App_Name" value="ref:App_Name"/>
      <Arg name="App_Desc" value="ref:App_Desc"/>
      <Arg name="App_Requestable_Attrs" value="ref:App_Requestable_Attrs"/>
      <Arg name="App_Implementers" value="ref:App_Implementers"/>
      <Arg name="App_IdentityAttr" value="ref:App_IdentityAttr"/>
      <Arg name="App_Entitlement_Values" value="ref:App_Entitlement_Values"/>
      <Arg name="App_Owner" value="ref:App_Owner"/>
      <Arg name="App_Type" value="ref:App_Type"/>
      <Arg name="is_SOM_Connected" value="ref:is_SOM_Connected"/>
      <Arg name="SOM_Details" value="ref:SOM_Details"/>
      <Script>
        <Source><![CDATA[
				
			import com.dupont.myaccess.RequestObjectValidator;
			Map args = workflow.getVariables().getMap();
			RequestObjectValidator validator = new RequestObjectValidator(context,log,args);
			return validator.getErrorMessges();
							
		]]></Source>
      </Script>
      <Transition to="Stop" when="script:((messages!=null) &amp;&amp; (messages.size()>0))"/>
      <Transition to="Create Application"/>
    </Step>
    <Step complete="true" icon="Provision" name="Create Application" posX="263" posY="10" resultVariable="Created_Objects">
      <Arg name="App_Attrs" value="ref:App_Attrs"/>
      <Arg name="App_CorrelatingAttr" value="ref:App_CorrelatingAttr"/>
      <Arg name="App_Entitlements" value="ref:App_Entitlements"/>
      <Arg name="App_Owner_Email" value="ref:App_Owner_Email"/>
      <Arg name="App_Owners" value="ref:App_Owners"/>
      <Arg name="App_Implementer_Email" value="ref:App_Implementer_Email"/>
      <Arg name="App_Name" value="ref:App_Name"/>
      <Arg name="App_Desc" value="ref:App_Desc"/>
      <Arg name="App_Requestable_Attrs" value="ref:App_Requestable_Attrs"/>
      <Arg name="App_Implementers" value="ref:App_Implementers"/>
      <Arg name="App_IdentityAttr" value="ref:App_IdentityAttr"/>
      <Arg name="App_Entitlement_Values" value="ref:App_Entitlement_Values"/>
      <Arg name="App_Owner" value="ref:App_Owner"/>
      <Arg name="Created_Objects" value="ref:Created_Objects"/>
      <Arg name="App_Type" value="ref:App_Type"/>
      <Arg name="is_SOM_Connected" value="ref:is_SOM_Connected"/>
      <Arg name="SOM_Details" value="ref:SOM_Details"/>
      <Script>
        <Source><![CDATA[
      	
      		import com.dupont.myaccess.Runner;
			Map args = workflow.getVariables().getMap();
			Runner runner = new Runner(context, log, args);
			return runner.execute();
      	]]></Source>
      </Script>
      <Transition to="Export Objects"/>
    </Step>
    <Step complete="true" icon="Task" name="Export Objects" posX="265" posY="151">
      <Arg name="App_System" value="ref:App_System"/>
      <Arg name="Created_Objects" value="ref:Created_Objects"/>
      <Script>
        <Source><![CDATA[
      	
      		import com.dupont.myaccess.ExportXMLObjects;
			ExportXMLObjects export = new ExportXMLObjects(Created_Objects,App_System,log,context);
			export.runExportTask();
      	
      	]]></Source>
      </Script>
      <Transition to="Upload to GIT"/>
    </Step>
    <Step icon="Task" name="Upload to GIT" posX="259" posY="278" wait="5">
      <Arg name="App_Name" value="ref:App_Name"/>
      <Script>
        <Source><![CDATA[
 	 			
 	 				import com.dupont.myaccess.JGitUploader;
 	 				
 	 				JGitUploader uploader = new JGitUploader();
 	 				uploader.pushToRemote(App_Name);
 	 				
 	 			
 	 		]]></Source>
      </Script>
    </Step>
    <Step icon="Stop" name="Stop" posX="111" posY="160">
      <Arg name="messages" value="ref:messages"/>
      <Script>
        <Source><![CDATA[
    			
    				if(messages!=null && messages.size()>0)				
						wfcase.addMessages(messages);
    			
    		]]></Source>
      </Script>
    </Step>
    <Attributes>
      <Map>
        <entry key="App_Attrs">
          <value>
            <List>
              <String>myAccessID</String>
              <String>systemAccess</String>
              <String>email</String>
            </List>
          </value>
        </entry>
        <entry key="App_CorrelatingAttr" value="myAccessID"/>
        <entry key="App_Desc" value="Account reconciliation system for consolidated entities."/>
        <entry key="App_Entitlement_Values">
          <value>
            <List>
              <Map>
                <entry key="Approval_Mode" value="Both"/>
                <entry key="Attribute" value="systemAccess"/>
                <entry key="Description" value="Requesting this access will give you access to the Blackline - Asia Pacific - Preparer asset in the Blackline Account Reconciliation tool."/>
                <entry key="DisplayName" value="Blackline - Asia Pacific - Preparer"/>
                <entry key="Is_Requestable">
                  <value>
                    <Boolean>true</Boolean>
                  </value>
                </entry>
                <entry key="Owner">
                  <value>
                    <List>
                      <String>ce4845</String>
                    </List>
                  </value>
                </entry>
                <entry key="Owner_Email" value="Rama.Venkatr1angan@dupont.com"/>
                <entry key="Value" value="Blackline - Asia Pacific - Preparer"/>
              </Map>
            </List>
          </value>
        </entry>
        <entry key="App_Entitlements">
          <value>
            <List>
              <String>systemAccess</String>
            </List>
          </value>
        </entry>
        <entry key="App_Grantors">
          <value>
            <List>
              <String>wy32751</String>
              <String>in46251</String>
            </List>
          </value>
        </entry>
        <entry key="App_Grantors_Email" value="in46251@local.com"/>
        <entry key="App_IdentityAttr" value="myAccessID"/>
        <entry key="App_Implementer_Email" value="Rama.Venk1atrangan@dupont.com"/>
        <entry key="App_Implementers" value="spadmin"/>
        <entry key="App_Name" value="onemorethereime"/>
        <entry key="App_Owner" value="ce4845"/>
        <entry key="App_Owner_Email" value="Rama.Venkatra1ngan@dupont.com"/>
        <entry key="App_Owners">
          <value>
            <List>
              <String>ce48451</String>
            </List>
          </value>
        </entry>
        <entry key="App_Requestable_Attrs">
          <value>
            <List>
              <String>systemAccess</String>
            </List>
          </value>
        </entry>
        <entry key="App_System" value="New"/>
        <entry key="App_Type" value="Disconnected SOM"/>
        <entry key="Created_Objects"/>
        <entry key="SOM_Details" value="NA"/>
        <entry key="is_SOM_Connected">
          <value>
            <Boolean>true</Boolean>
          </value>
        </entry>
        <entry key="launcher" value="spadmin"/>
        <entry key="messages"/>
        <entry key="sessionOwner" value="spadmin"/>
        <entry key="taskResultId" value="8a7945d8644651cf016446559fb50008"/>
      </Map>
    </Attributes>
  </Workflow>
</WorkflowCase>